<div class='spin-container'>
    <div class='spin-header'>
        <h2>SPIN & WIN REWARDS!</h2>
        <p>Spin the wheel to win amazing prizes</p>
    </div>
    
    <div class='wheel-container'>
        <div class='wheel' id='wheel'>
            <!-- Wheel segments will be added by JavaScript -->
        </div>
        <div class='wheel-pointer'></div>
    </div>
    
    <button class='spin-btn' id='spinBtn'>SPIN NOW</button>
    
    <div class='referral-section'>
        <h3>Refer & Earn</h3>
        <p>Share your referral code to earn more spins</p>
        <div class='referral-input'>
            <input type='text' id='referralCode' placeholder='Enter referral code' readonly/>
            <button id='copyRefBtn'><i class='fas fa-copy'></i></button>
        </div>
        <p id='refStatus'></p>
    </div>
    
    <div class='social-links'>
        <a href='#' class='facebook' id='fbShare'><i class='fab fa-facebook-f'></i></a>
        <a href='#' class='twitter' id='twitterShare'><i class='fab fa-twitter'></i></a>
        <a href='#' class='instagram' id='instagramShare'><i class='fab fa-instagram'></i></a>
        <a href='#' class='whatsapp' id='whatsappShare'><i class='fab fa-whatsapp'></i></a>
    </div>
</div>

<div class='result-modal' id='resultModal'>
    <div class='modal-content'>
        <h3>CONGRATULATIONS!</h3>
        <div class='prize-icon' id='prizeIcon'>
            <i class='fas fa-gift'></i>
        </div>
        <p>You've won: <span id='prizeText'></span></p>
        <p id='refEarnMessage'></p>
        <button class='close-modal' id='closeModal'>CLOSE</button>
    </div>
</div>

<style>
.spin-container {
    font-family: 'Arial', sans-serif;
    max-width: 400px;
    margin: 20px auto;
    padding: 20px;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    text-align: center;
    position: relative;
    overflow: hidden;
}

.spin-header {
    margin-bottom: 20px;
}

.spin-header h2 {
    color: #2c3e50;
    margin: 0;
    font-size: 24px;
}

.spin-header p {
    color: #7f8c8d;
    margin: 5px 0 0;
    font-size: 14px;
}

.wheel-container {
    position: relative;
    width: 300px;
    height: 300px;
    margin: 0 auto 20px;
}

.wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    position: relative;
    overflow: hidden;
    border: 8px solid #fff;
    box-shadow: 0 0 0 8px #2c3e50, 0 0 30px rgba(0, 0, 0, 0.2);
    transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
    transform: rotate(0deg);
}

.wheel-item {
    position: absolute;
    width: 50%;
    height: 50%;
    transform-origin: bottom right;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: white;
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}

.wheel-pointer {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 40px;
    z-index: 10;
}

.wheel-pointer:before {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-top: 25px solid #e74c3c;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
}

.spin-btn {
    background: #e74c3c;
    color: white;
    border: none;
    padding: 12px 30px;
    font-size: 16px;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
    margin-bottom: 20px;
}

.spin-btn:hover {
    background: #c0392b;
    transform: translateY(-2px);
    box-shadow: 0 7px 20px rgba(231, 76, 60, 0.6);
}

.spin-btn:disabled {
    background: #95a5a6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.result-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 100;
    align-items: center;
    justify-content: center;
}

.modal-content {
    background: white;
    padding: 30px;
    border-radius: 15px;
    text-align: center;
    max-width: 350px;
    animation: modalFadeIn 0.5s;
}

@keyframes modalFadeIn {
    from { opacity: 0; transform: translateY(-50px); }
    to { opacity: 1; transform: translateY(0); }
}

.modal-content h3 {
    color: #2c3e50;
    margin-top: 0;
}

.prize-icon {
    font-size: 50px;
    margin: 15px 0;
    color: #f39c12;
}

.close-modal {
    background: #3498db;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 15px;
}

.referral-section {
    margin-top: 20px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 10px;
}

.referral-input {
    display: flex;
    margin-bottom: 10px;
}

.referral-input input {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px 0 0 5px;
    outline: none;
}

.referral-input button {
    background: #3498db;
    color: white;
    border: none;
    padding: 0 15px;
    border-radius: 0 5px 5px 0;
    cursor: pointer;
}

.social-links {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 15px;
}

.social-links a {
    color: white;
    background: #2c3e50;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    transition: all 0.3s;
}

.social-links a:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.facebook:hover { background: #3b5998; }
.twitter:hover { background: #1da1f2; }
.instagram:hover { background: #e1306c; }
.whatsapp:hover { background: #25d366; }

/* Prize animation */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.prize-animation {
    animation: pulse 1s infinite;
    color: #e74c3c;
    font-weight: bold;
}
</style>

<script>
// Prizes configuration (you can modify these)
const prizes = [
    { text: "10% Discount", color: "#f39c12", icon: "fa-percentage" },
    { text: "Free Shipping", color: "#3498db", icon: "fa-truck" },
    { text: "₹100 Cash", color: "#2ecc71", icon: "fa-rupee-sign" },
    { text: "Try Again", color: "#e74c3c", icon: "fa-redo" },
    { text: "₹50 Cash", color: "#9b59b6", icon: "fa-rupee-sign" },
    { text: "5% Discount", color: "#1abc9c", icon: "fa-percentage" },
    { text: "Free Gift", color: "#d35400", icon: "fa-gift" },
    { text: "₹25 Cash", color: "#34495e", icon: "fa-rupee-sign" }
];

// Generate wheel segments
function generateWheel() {
    const wheel = document.getElementById('wheel');
    wheel.innerHTML = '';
    const segmentAngle = 360 / prizes.length;
    
    prizes.forEach((prize, index) => {
        const segment = document.createElement('div');
        segment.className = 'wheel-item';
        segment.style.transform = `rotate(${segmentAngle * index}deg)`;
        segment.style.backgroundColor = prize.color;
        segment.innerHTML = `<span style="transform: rotate(${segmentAngle/2}deg);">${prize.text}</span>`;
        wheel.appendChild(segment);
    });
}

// Spin the wheel with smooth animation
function spinWheel() {
    const wheel = document.getElementById('wheel');
    const spinBtn = document.getElementById('spinBtn');
    
    spinBtn.disabled = true;
    const segmentAngle = 360 / prizes.length;
    const extraRotations = 5; // Number of full rotations before stopping
    const randomSegment = Math.floor(Math.random() * prizes.length);
    const degreesToStop = (360 * extraRotations) + (segmentAngle * randomSegment);
    
    // Reset wheel position (for multiple spins)
    wheel.style.transition = 'none';
    wheel.style.transform = 'rotate(0deg)';
    
    // Force reflow to apply reset
    void wheel.offsetWidth;
    
    // Apply smooth spinning transition
    wheel.style.transition = 'transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
    wheel.style.transform = `rotate(${degreesToStop}deg)`;
    
    setTimeout(() => {
        showResult(prizes[randomSegment]);
    }, 5000);
}

// Show result modal with animation
function showResult(prize) {
    const prizeText = document.getElementById('prizeText');
    const prizeIcon = document.getElementById('prizeIcon');
    const resultModal = document.getElementById('resultModal');
    const refEarnMessage = document.getElementById('refEarnMessage');
    
    prizeText.textContent = prize.text;
    prizeIcon.innerHTML = `<i class="fas ${prize.icon}"></i>`;
    
    // Add pulse animation to prize text
    prizeText.classList.add('prize-animation');
    
    resultModal.style.display = 'flex';
}

// Generate referral code for user
function generateReferralCode() {
    if (!localStorage.getItem('referralCode')) {
        const code = 'REF' + Math.random().toString(36).substr(2, 6).toUpperCase();
        localStorage.setItem('referralCode', code);
        return code;
    }
    return localStorage.getItem('referralCode');
}

// Initialize the widget
function init() {
    generateWheel();
    
    // Set up referral code
    const code = generateReferralCode();
    document.getElementById('referralCode').value = code;
    
    // Set up social share links
    const shareUrl = encodeURIComponent(window.location.href.split('?')[0] + '?ref=' + code);
    const shareText = encodeURIComponent('Spin the wheel and win amazing prizes! Use my referral code: ' + code);
    
    document.getElementById('fbShare').href = `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}`;
    document.getElementById('twitterShare').href = `https://twitter.com/intent/tweet?text=${shareText}&url=${shareUrl}`;
    document.getElementById('instagramShare').href = `https://instagram.com`;
    document.getElementById('whatsappShare').href = `https://wa.me/?text=${shareText} ${shareUrl}`;
    
    // Event listeners
    document.getElementById('spinBtn').addEventListener('click', spinWheel);
    document.getElementById('closeModal').addEventListener('click', () => {
        document.getElementById('resultModal').style.display = 'none';
        document.getElementById('prizeText').classList.remove('prize-animation');
        document.getElementById('spinBtn').disabled = false;
    });
    
    document.getElementById('copyRefBtn').addEventListener('click', () => {
        const referralCode = document.getElementById('referralCode');
        referralCode.select();
        document.execCommand('copy');
        document.getElementById('refStatus').textContent = 'Copied to clipboard!';
        setTimeout(() => {
            document.getElementById('refStatus').textContent = '';
        }, 2000);
    });
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', init);
</script>

<!-- Add Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
