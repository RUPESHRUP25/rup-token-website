<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§∏‡•ç‡§™‡§ø‡§® ‡§è‡§Ç‡§° ‡§µ‡§ø‡§® - ‡§∞‡•Ç‡§™‡•á‡§∂ ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•â‡§®‡§ø‡§ï‡•ç‡§∏</title>
    
    <!-- ‡§´‡•â‡§®‡•ç‡§ü ‡§î‡§∞ ‡§Ü‡§á‡§ï‡§® ‡§≤‡§ø‡§Ç‡§ï -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>

    <style>
        /* ‡§¨‡•á‡§∏‡§ø‡§ï ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤‡§ø‡§Ç‡§ó */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            color: white;
            min-height: 100vh;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ‡§π‡•á‡§°‡§∞ ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ */
        header {
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            text-align: center;
            padding: 15px;
            border-bottom: 3px solid #ff9800;
        }

        /* ‡§µ‡•ç‡§π‡•Ä‡§≤ ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ */
        #wheel-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 30px auto;
            max-width: 600px;
        }

        /* ‡§∏‡•ç‡§™‡§ø‡§® ‡§µ‡•ç‡§π‡•Ä‡§≤ */
        #wheel {
            width: 280px;
            height: 280px;
            border: 15px solid #444;
            border-radius: 50%;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
            transition: transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            background: #222;
            overflow: hidden;
        }

        /* ‡§∏‡•ç‡§™‡§ø‡§® ‡§¨‡§ü‡§® */
        #spin-button {
            padding: 15px 40px;
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            border: none;
            color: white;
            font-size: 20px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* ‡§≤‡•â‡§ó‡§ø‡§® ‡§Æ‡•ã‡§°‡§≤ */
        .login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
        }

        .login-content {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            margin: 100px auto;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            border-radius: 15px;
            text-align: center;
        }

        /* ‡§î‡§∞ ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤‡•ç‡§∏ ‡§Ü‡§™‡§ï‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç */
    </style>
</head>
<body>
    <!-- ‡§≤‡•â‡§ó‡§ø‡§® ‡§Æ‡•ã‡§°‡§≤ -->
    <div id="loginModal" class="login-modal">
        <div class="login-content">
            <h2>‡§≤‡•â‡§ó‡§ø‡§® / ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞</h2>
            <input type="email" id="loginEmail" class="login-input" placeholder="‡§à‡§Æ‡•á‡§≤">
            <input type="password" id="loginPassword" class="login-input" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">
            <button id="loginBtn" class="login-btn">‡§≤‡•â‡§ó‡§ø‡§®</button>
            <button id="registerBtn" class="login-btn" style="background:linear-gradient(to right, #4CAF50, #2E7D32)">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞</button>
            <p id="loginError" style="color:#ff9800;margin-top:10px;"></p>
        </div>
    </div>

    <!-- ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü -->
    <header>
        <h1>üé° ‡§∏‡•ç‡§™‡§ø‡§® ‡§è‡§Ç‡§° ‡§µ‡§ø‡§® üé°</h1>
        <p>‡§∞‡•Ç‡§™‡•á‡§∂ ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•â‡§®‡§ø‡§ï‡•ç‡§∏ - ‡§°‡•á‡§≤‡•Ä ‡§∞‡§ø‡§µ‡•â‡§∞‡•ç‡§°‡•ç‡§∏</p>
    </header>

    <div id="wheel-container">
        <div id="wheel"></div>
        <button id="spin-button"><i class="fas fa-sync-alt"></i> ‡§∏‡•ç‡§™‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</button>
        <div id="spin-result">‡§Ö‡§¶‡•ç‡§≠‡•Å‡§§ ‡§™‡•Å‡§∞‡§∏‡•ç‡§ï‡§æ‡§∞ ‡§ú‡•Ä‡§§‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§™‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç!</div>
    </div>

    <script>
        // Firebase ‡§ï‡•â‡§®‡•ç‡§´‡§ø‡§ó‡§∞‡•á‡§∂‡§® - ‡§Ö‡§™‡§®‡•Ä ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•á ‡§¨‡§¶‡§≤‡•á‡§Ç
        const firebaseConfig = {
            apiKey: "AIzaSyYOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Firebase ‡§á‡§®‡§ø‡§∂‡§ø‡§Ø‡§≤‡§æ‡§á‡§ú‡§º ‡§ï‡§∞‡•á‡§Ç
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();

        // ‡§ó‡•ç‡§≤‡•ã‡§¨‡§≤ ‡§µ‡•á‡§∞‡§ø‡§è‡§¨‡§≤‡•ç‡§∏
        let currentUser = null;
        let points = 0;

        // DOM ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§≤‡•ã‡§° ‡§π‡•ã‡§®‡•á ‡§™‡§∞
        document.addEventListener('DOMContentLoaded', function() {
            // ‡§ë‡§• ‡§∏‡•ç‡§ü‡•á‡§ü ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç
            auth.onAuthStateChanged(user => {
                if (user) {
                    currentUser = user;
                    document.getElementById('loginModal').style.display = 'none';
                    loadUserData();
                    initWheel();
                } else {
                    document.getElementById('loginModal').style.display = 'block';
                }
            });

            // ‡§≤‡•â‡§ó‡§ø‡§®/‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§¨‡§ü‡§® ‡§á‡§µ‡•á‡§Ç‡§ü
            document.getElementById('loginBtn').addEventListener('click', loginUser);
            document.getElementById('registerBtn').addEventListener('click', registerUser);
        });

        // ‡§Ø‡•Ç‡§ú‡§∞ ‡§≤‡•â‡§ó‡§ø‡§® ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        function loginUser() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            auth.signInWithEmailAndPassword(email, password)
                .then(userCredential => {
                    currentUser = userCredential.user;
                    document.getElementById('loginModal').style.display = 'none';
                    loadUserData();
                })
                .catch(error => {
                    document.getElementById('loginError').textContent = error.message;
                });
        }

        // ‡§Ø‡•Ç‡§ú‡§∞ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        function registerUser() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            auth.createUserWithEmailAndPassword(email, password)
                .then(userCredential => {
                    currentUser = userCredential.user;
                    
                    // ‡§´‡§æ‡§Ø‡§∞‡§¨‡•á‡§∏ ‡§Æ‡•á‡§Ç ‡§Ø‡•Ç‡§ú‡§∞ ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
                    return database.ref('users/' + currentUser.uid).set({
                        email: email,
                        points: 0,
                        createdAt: firebase.database.ServerValue.TIMESTAMP
                    });
                })
                .then(() => {
                    document.getElementById('loginModal').style.display = 'none';
                    loadUserData();
                })
                .catch(error => {
                    document.getElementById('loginError').textContent = error.message;
                });
        }

        // ‡§Ø‡•Ç‡§ú‡§∞ ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç
        function loadUserData() {
            database.ref('users/' + currentUser.uid).once('value')
                .then(snapshot => {
                    const userData = snapshot.val();
                    points = userData.points || 0;
                    updateUI();
                });
        }

        // ‡§µ‡•ç‡§π‡•Ä‡§≤ ‡§á‡§®‡§ø‡§∂‡§ø‡§Ø‡§≤‡§æ‡§á‡§ú‡§º ‡§ï‡§∞‡•á‡§Ç
        function initWheel() {
            const wheel = document.getElementById("wheel");
            const prizes = [
                { text: "150 ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏", color: "#FF5252", value: 150 },
                { text: "250 ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏", color: "#FF4081", value: 250 },
                { text: "200 ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏", color: "#E040FB", value: 200 },
                { text: "300 ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏", color: "#7C4DFF", value: 300 },
                { text: "350 ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏", color: "#536DFE", value: 350 },
                { text: "400 ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏", color: "#448AFF", value: 400 },
                { text: "450 ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏", color: "#40C4FF", value: 450 },
                { text: "500 ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏", color: "#18FFFF", value: 500 }
            ];

            // ‡§µ‡•ç‡§π‡•Ä‡§≤ ‡§∏‡•á‡§ï‡•ç‡§ü‡§∞ ‡§¨‡§®‡§æ‡§è‡§Ç
            prizes.forEach((prize, index) => {
                const sector = document.createElement("div");
                sector.className = "sector";
                sector.style.transform = `rotate(${index * 45}deg)`;
                sector.style.backgroundColor = prize.color;
                
                const prizeText = document.createElement("div");
                prizeText.textContent = prize.text;
                prizeText.style.transform = `rotate(22.5deg)`;
                prizeText.style.marginTop = "20px";
                
                sector.appendChild(prizeText);
                wheel.appendChild(sector);
            });

            // ‡§∏‡•ç‡§™‡§ø‡§® ‡§¨‡§ü‡§® ‡§á‡§µ‡•á‡§Ç‡§ü
            document.getElementById("spin-button").addEventListener("click", spinWheel);
        }

        // ‡§∏‡•ç‡§™‡§ø‡§® ‡§µ‡•ç‡§π‡•Ä‡§≤ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        function spinWheel() {
            if (!currentUser) return;
            
            const wheel = document.getElementById("wheel");
            const spinButton = document.getElementById("spin-button");
            const spinResult = document.getElementById("spin-result");
            
            spinButton.disabled = true;
            spinResult.textContent = "‡§∏‡•ç‡§™‡§ø‡§® ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à... ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Å!";
            
            const randomSpin = Math.floor(Math.random() * 360) + 5 * 360;
            wheel.style.transition = "transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99)";
            wheel.style.transform = `rotate(${randomSpin}deg)`;
            
            setTimeout(() => {
                const prizeValues = [150, 250, 200, 300, 350, 400, 450, 500];
                const normalizedAngle = randomSpin % 360;
                const prizeIndex = Math.floor((360 - normalizedAngle) / 45) % prizeValues.length;
                const reward = prizeValues[prizeIndex];
                
                points += reward;
                spinResult.innerHTML = `üéâ ‡§¨‡§ß‡§æ‡§à ‡§π‡•ã! ‡§Ü‡§™‡§®‡•á <strong>${reward} ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏</strong> ‡§ú‡•Ä‡§§‡•á! üéâ`;
                
                // ‡§´‡§æ‡§Ø‡§∞‡§¨‡•á‡§∏ ‡§Æ‡•á‡§Ç ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
                database.ref('spins/' + currentUser.uid).push({
                    points: reward,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
                
                database.ref('users/' + currentUser.uid).update({
                    points: firebase.database.ServerValue.increment(reward)
                });
                
                spinButton.disabled = false;
            }, 3000);
        }

        // UI ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
        function updateUI() {
            // ‡§Ö‡§™‡§®‡•á UI ‡§è‡§≤‡§ø‡§Æ‡•á‡§Ç‡§ü‡•ç‡§∏ ‡§ï‡•ã ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
            console.log("‡§Ø‡•Ç‡§ú‡§∞ ‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏:", points);
        }
    </script>
</body>
</html>
