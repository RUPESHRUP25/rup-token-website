<!DOCTYPE html>
<html>
<head>
  <title>रुपेश इलेक्ट्रॉनिक्स - पुरस्कार अपडेट</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>

<h2>ग्राहक पुरस्कार अपडेट</h2>

<script>
  // अपना Firebase कॉन्फिग यहाँ डालें
  const firebaseConfig = {
    apiKey: "AIzaSy...",
    authDomain: "your-project.firebaseapp.com",
    projectId: "your-project-id",
    storageBucket: "your-app.appspot.com",
    messagingSenderId: "123456789",
    appId: "1:123456789:web:abc123def456"
  };

  // Firebase इनिशियलाइज़ करें
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  function updateReward() {
    const email = "mrrupesh.kumar000@gmail.com"; // ग्राहक का ईमेल
    const upiRef = prompt("UPI ट्रांजैक्शन ID डालें:");
    
    if (upiRef) {
      db.collection("users").where("email", "==", email).get()
        .then((querySnapshot) => {
          querySnapshot.forEach((doc) => {
            // ग्राहक का डेटा अपडेट करें
            doc.ref.update({
              rewards: firebase.firestore.FieldValue.arrayUnion({
                amount: 20,
                date: new Date().toLocaleString(),
                status: "Transferred",
                method: "Manual UPI",
                transactionId: upiRef
              })
            }).then(() => {
              alert("पुरस्कार सफलतापूर्वक अपडेट किया गया!");
            });
          });
        })
        .catch((error) => {
          alert("त्रुटि: " + error.message);
        });
    }
  }

  // पेज लोड होते ही अपडेट शुरू
  window.onload = updateReward;
</script>

</body>
</html>
